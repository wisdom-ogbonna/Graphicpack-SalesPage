(new function(){var self=this;self.env='live';self.url='https://app.paykickstart.com';self.url_collect='/collect';self.pixel_id='pkTrakingPixel';self.params={};self.data={};self.init=function(){self.setParams();self.setEnv();self.setUrl();self.setPixelId();window.addEventListener('load',self.track)};self.track=function(){self.collect();self.sendData()};self.collect=function(){if(self.params.ignore_query){self.data['ignore-query']=1}
    self.data.resolution=window.screen.width+'x'+window.screen.height;self.data.page=window.location;self.data.referrer=document.referrer};self.sendData=function(){var query_string=Object.keys(self.data).map(function(key){return encodeURIComponent(key)+'='+encodeURIComponent(self.data[key])}).join('&');self.setPixelUrl(query_string)};self.setPixelId=function(){self.pixel_id=self.pixel_id+(self.env[0].toUpperCase()+self.env.slice(1))};self.setPixelUrl=function(query_string){if(typeof(query_string)=='undefined'){query_string=''}
    var pixel=document.getElementById(self.pixel_id);var pixel_url=self.url+self.url_collect+'?'+query_string;if(pixel==null){self.createPixel(pixel_url)}else{pixel.setAttribute('src',pixel_url)}};self.createPixel=function(pixel_url){var pixel=document.createElement("img");pixel.setAttribute('id',self.pixel_id);pixel.setAttribute('src',pixel_url);pixel.setAttribute('height','1px');pixel.setAttribute('width','1px');pixel.style.display='none';document.body.appendChild(pixel)};self.setParams=function(){var src=self.getScriptSrc();self.params=self.getQueryParams(src);if(!self.params.env){var a=document.createElement('a');a.href=src.toLowerCase();switch(a.hostname){case "app.paykickstart.com":self.params.env='live';break;case "staging.paykickstart.com":case "dev.paykickstart.com":self.params.env=a.hostname.slice(0,a.hostname.indexOf('.')).toLowerCase();break}}};self.setEnv=function(){self.params.env=(self.params.env||'').toLowerCase();switch(!0){case!self.params.env:case self.params.env==='live':case self.params.env==='production':self.env='live';break;case self.params.env==='staging':self.env='staging';break;case self.params.env==='dev':case self.params.env==='develop':case self.params.env==='development':self.env='dev';break;default:self.env='local';self.url='https://'+self.params.env;break}};self.setUrl=function(){switch(self.env){case "live":case "production":self.url='https://app.paykickstart.com';break;case "staging":self.url='https://staging.paykickstart.com';break;case "dev":case "develop":case "development":self.url='https://dev.paykickstart.com';break;case "local":break}};self.getScriptSrc=function(){document.currentScript=document.currentScript||(function(){var scripts=document.getElementsByTagName('script');return scripts[scripts.length-1]})();return document.currentScript.getAttribute('src')};self.getQueryParams=function(url){var queryString=url.split('?')[1];var obj={};if(queryString){queryString=queryString.split('#')[0];var arr=queryString.split('&');for(var i=0;i<arr.length;i++){var a=arr[i].split('=');if(typeof(a[1])==='undefined'){continue}
    var paramName=a[0];var paramValue=a[1];paramName=paramName.toLowerCase();if(typeof paramValue==='string')paramValue=paramValue.toLowerCase();if(paramName.match(/\[(\d+)?\]$/)){var key=paramName.replace(/\[(\d+)?\]/,'');if(!obj[key])obj[key]=[];if(paramName.match(/\[\d+\]$/)){var index=/\[(\d+)\]/.exec(paramName)[1];obj[key][index]=paramValue}else{obj[key].push(paramValue)}}else{if(!obj[paramName]){obj[paramName]=paramValue}else if(obj[paramName]&&typeof obj[paramName]==='string'){obj[paramName]=[obj[paramName]];obj[paramName].push(paramValue)}else{obj[paramName].push(paramValue)}}}}
    return obj}}).init()